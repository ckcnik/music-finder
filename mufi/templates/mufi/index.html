{% load staticfiles %}
<script src="{% static 'mufi/js/jquery.js' %}"></script>
<link rel="stylesheet" type="text/css" href="{% static 'mufi/style.css' %}" />
{# Load the tag library #}
{% load bootstrap3 %}

{# Load CSS and JavaScript #}
{% bootstrap_css %}
{% bootstrap_javascript %}

{# Display django.contrib.messages as Bootstrap alerts #}
{% bootstrap_messages %}

<div class="container">
{# Display a form #}
<form id='youtube-form' action="/" method="post" class="form">
  {% csrf_token %}
  {% bootstrap_form form %}
  {% buttons %}
    <button id='submit-button' type="submit" class="btn btn-primary">
      {% bootstrap_icon "star" %} Submit
    </button>
  {% endbuttons %}
</form>
<img src="{% static 'mufi/images/loader.gif' %}" class="loader">
<div id="parsing-result"></div>
</div>

<script type="text/javascript">
$(document).ready(function() {
    // Submit post on submit
    $('#submit-button').on('click', function(event){
        $('img.loader').show();
        event.preventDefault();
        console.log("form submitted!")  // sanity check
        var frm = $('#youtube-form');
        $.ajax({
            type: frm.attr('method'),
            url: frm.attr('action'),
            data: frm.serialize(),
            success: function (data) {
                $("#parsing-result").html(data);
                $('img.loader').hide();
            },
            error: function(data) {
                $("#parsing-result").html("Something went wrong!");
            }
        });
        return false;
    });
});
</script>